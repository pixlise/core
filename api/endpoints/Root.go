// Licensed to NASA JPL under one or more contributor
// license agreements. See the NOTICE file distributed with
// this work for additional information regarding copyright
// ownership. NASA JPL licenses this file to you under
// the Apache License, Version 2.0 (the "License"); you may
// not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing,
// software distributed under the License is distributed on an
// "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
// KIND, either express or implied.  See the License for the
// specific language governing permissions and limitations
// under the License.

package endpoints

import (
	"fmt"

	apiRouter "github.com/pixlise/core/v4/api/router"
	"github.com/pixlise/core/v4/api/services"
)

////////////////////////////////////////////////////////////////////////////////////////////////////////////
// Root request, which also shows version & a logo

func RootRequest(params apiRouter.ApiHandlerGenericPublicParams) error {
	params.Writer.Header().Add("Content-Type", "text/html")

	const binchicken = `<img style="margin-top: 50px" src="data:image/png;base64,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">`

	var start string = `<!DOCTYPE html>
<html lang="en"><head></head>
<body style="font-family: Arial, Helvetica, sans-serif">
<center>`
	var midtemplate = "<h1>PIXLISE API</h1><p>Version %s</p><p>Git Commit: %s"
	var mid = fmt.Sprintf(midtemplate, getAPIVersion(), services.GitHash)
	var end string = `</p>
</center>
</body>`

	params.Writer.Write([]byte(start + binchicken + mid + end))
	return nil
}
